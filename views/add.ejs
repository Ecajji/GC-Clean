<!DOCTYPE html>
<html>
<head>
  <title>Add Trash</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light p-4">

  <div class="container">
    <h2 class="mb-4 text-success">âž• Add Trash Item</h2>


    <form id="addForm" action="/add" method="POST" novalidate>
      <!-- Type -->
      <div class="mb-3">
        <label>Type</label>
        <input type="text" name="type" 
          class="form-control <%= errors?.type ? 'is-invalid' : '' %>" 
          value="<%= values?.type || '' %>">
        <% if (errors?.type) { %>
          <div class="invalid-feedback"><%= errors.type %></div>
        <% } %>
      </div>

      <!-- Quantity -->
      <div class="mb-3">
        <label>Quantity</label>
        <input type="number" name="quantity"
          class="form-control <%= errors?.quantity ? 'is-invalid' : '' %>"
          value="<%= values?.quantity || '' %>" min="1">
        <% if (errors?.quantity) { %>
          <div class="invalid-feedback"><%= errors.quantity %></div>
        <% } %>
      </div>

      <!-- Location -->
      <div class="mb-3">
        <label>Location</label>
        <input type="text" name="location"
          class="form-control <%= errors?.location ? 'is-invalid' : '' %>"
          value="<%= values?.location || '' %>">
        <% if (errors?.location) { %>
          <div class="invalid-feedback"><%= errors.location %></div>
        <% } %>
      </div>

      <!-- Date -->
      <div class="mb-3">
        <label>Date</label>
        <input type="date" id="dateInput" name="date"
          class="form-control <%= errors?.date ? 'is-invalid' : '' %>"
          value="<%= values?.date || '' %>">
        <% if (errors?.date) { %>
          <div class="invalid-feedback"><%= errors.date %></div>
        <% } %>
      </div>

      <!-- Collector -->
      <div class="mb-3">
        <label>Collector Name</label>
        <input type="text" name="collector"
          class="form-control <%= errors?.collector ? 'is-invalid' : '' %>"
          value="<%= values?.collector || '' %>">
        <% if (errors?.collector) { %>
          <div class="invalid-feedback"><%= errors.collector %></div>
        <% } %>
      </div>

      <button class="btn btn-success">Save</button>
      <a href="/" class="btn btn-outline-secondary">Cancel</a>
    </form>
  </div>

  <script>
    // ðŸŸ¢ Client-side date validation
    document.addEventListener("DOMContentLoaded", () => {
      const dateInput = document.getElementById("dateInput");
      const today = new Date();
      const yyyy = today.getFullYear();
      const mm = String(today.getMonth() + 1).padStart(2, '0');
      const dd = String(today.getDate()).padStart(2, '0');

      // Disable future dates + before 2024
      dateInput.max = `${yyyy}-${mm}-${dd}`;
      dateInput.min = "2024-01-01";

      document.getElementById("addForm").addEventListener("submit", (e) => {
        const dateValue = new Date(dateInput.value);
        const minDate = new Date("2024-01-01");

        if (isNaN(dateValue) || dateValue > today || dateValue < minDate) {
          e.preventDefault();
          alert("Please choose a valid date (between Jan 1, 2024 and today).");
        }
      });
    });
  </script>
</body>
</html>
